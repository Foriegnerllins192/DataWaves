<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Buy affordable mobile data bundles for MTN, Telecel, and AirtelTigo in Ghana. Fast, reliable, and secure data purchases with instant delivery.">
  <meta name="keywords" content="mobile data, Ghana, MTN, Telecel, AirtelTigo, data bundles, internet, mobile internet, data purchase">
  <meta name="author" content="DataWaves">
  <meta name="robots" content="index, follow">
  <title>DataWaves - Buy Mobile Data in Ghana | Fast & Affordable</title>
  <link rel="stylesheet" href="style.css" />
  <!-- Font Awesome for Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
  <!-- Modern Navbar -->
  <nav class="navbar">
    <div class="navbar-container">
      <a href="index.html" class="navbar-brand">
        <div class="brand-icon">DW</div>
        <div class="brand-text">DataWaves</div>
      </a>
      
      <ul class="navbar-nav">
        <li class="nav-item">
          <a href="mtn.html" class="nav-link">
            <img src="images/mtn.png" alt="MTN">
            <span class="nav-tooltip">MTN Ghana</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="telecel.html" class="nav-link">
            <img src="images/telecel.png" alt="Telecel">
            <span class="nav-tooltip">Telecel Ghana</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="at.html" class="nav-link">
            <img src="images/airteltigo.png" alt="AirtelTigo">
            <span class="nav-tooltip">AirtelTigo Ghana</span>
          </a>
        </li>
      </ul>
      
      <div class="navbar-actions">
        <!-- User info will be displayed here after login -->
        <div id="user-info" class="user-menu" style="display: none;">
          <a href="account.html" class="user-button" id="user-button">
            <div class="user-avatar" id="user-avatar">U</div>
            <span id="user-name">Account</span>
          </a>
          <a href="#" onclick="logout()" class="logout-btn">
            <i class="fas fa-sign-out-alt"></i>
            Logout
          </a>
        </div>
        
        <!-- Default auth links for logged out users -->
        <div id="auth-links-default" class="auth-buttons">
          <a href="login.html" class="auth-btn login">
            <i class="fas fa-sign-in-alt"></i>
            Login
          </a>
          <a href="register.html" class="auth-btn register">
            <i class="fas fa-user-plus"></i>
            Register
          </a>
          <a href="account.html" class="auth-btn account">
            <i class="fas fa-user"></i>
            Account
          </a>
        </div>
        
        <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
          <i class="fas fa-bars"></i>
        </button>
      </div>
    </div>
  </nav>

  <!-- Main Content Wrapper -->
  <main class="main-content">
    <!-- Hero Section -->
  <section class="hero-section">
    <div class="hero-content">
      <div class="hero-text">
        <h1>Buy Mobile Data in Ghana</h1>
        <p>Fast, easy, and affordable mobile data bundles from all major Ghanaian networks. MTN, Telecel, and AirtelTigo.</p>
        <div class="hero-stats">
          <div class="stat-item">
            <i class="fas fa-clock"></i>
            <span>20 Min Delivery</span>
          </div>
          <div class="stat-item">
            <i class="fas fa-shield-alt"></i>
            <span>100% Secure</span>
          </div>
          <div class="stat-item">
            <i class="fas fa-headset"></i>
            <span>24/7 Support</span>
          </div>
        </div>
        <div class="hero-actions" id="hero-auth-links">
          <a href="login.html" class="hero-btn primary">
            <i class="fas fa-sign-in-alt"></i>
            Get Started
          </a>
          <a href="register.html" class="hero-btn secondary">
            <i class="fas fa-user-plus"></i>
            Create Account
          </a>
        </div>
      </div>
      <div class="hero-visual">
        <div class="floating-cards">
          <div class="network-card mtn">
            <img src="images/mtn.png" alt="MTN">
            <span>MTN</span>
          </div>
          <div class="network-card telecel">
            <img src="images/telecel.png" alt="Telecel">
            <span>Telecel</span>
          </div>
          <div class="network-card airteltigo">
            <img src="images/airteltigo.png" alt="AirtelTigo">
            <span>AirtelTigo</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Available Plans Section -->
  <section class="plans-section">
    <div class="container">
      <div class="section-header">
        <h2>Available Data Plans</h2>
        <p>Choose from our wide range of affordable data bundles</p>
      </div>

      <!-- Loading indicator -->
      <div id="plansLoading" class="loading-container">
        <div class="loading-spinner"></div>
        <p>Loading data plans...</p>
      </div>

      <!-- Plans will be loaded here -->
      <div id="plansContainer" class="plans-container" style="display: none;">
        <!-- MTN Ghana -->
        <div id="mtnSection" class="provider-section" style="display: none;">
          <div class="provider-header mtn-gradient">
            <div class="provider-info">
              <img src="images/mtn.png" alt="MTN" class="provider-logo">
              <div>
                <h3>MTN Ghana</h3>
                <p>Reliable network coverage nationwide</p>
              </div>
            </div>
            <a href="buy-plan.html?network=mtn" class="provider-btn">
              <i class="fas fa-shopping-cart"></i>
              Buy MTN Data
            </a>
          </div>
          <div class="modern-plans-grid" id="mtnPlans">
            <!-- MTN plans will be loaded here -->
          </div>
        </div>

        <!-- Telecel Ghana -->
        <div id="telecelSection" class="provider-section" style="display: none;">
          <div class="provider-header telecel-gradient">
            <div class="provider-info">
              <img src="images/telecel.png" alt="Telecel" class="provider-logo">
              <div>
                <h3>Telecel Ghana</h3>
                <p>Fast and affordable data plans</p>
              </div>
            </div>
            <a href="buy-plan.html?network=telecel" class="provider-btn">
              <i class="fas fa-shopping-cart"></i>
              Buy Telecel Data
            </a>
          </div>
          <div class="modern-plans-grid" id="telecelPlans">
            <!-- Telecel plans will be loaded here -->
          </div>
        </div>

        <!-- AirtelTigo Ghana -->
        <div id="airteltigoSection" class="provider-section" style="display: none;">
          <div class="provider-header airteltigo-gradient">
            <div class="provider-info">
              <img src="images/airteltigo.png" alt="AirtelTigo" class="provider-logo">
              <div>
                <h3>AirtelTigo Ghana</h3>
                <p>Innovative mobile data solutions</p>
              </div>
            </div>
            <a href="buy-plan.html?network=airteltigo" class="provider-btn">
              <i class="fas fa-shopping-cart"></i>
              Buy AirtelTigo Data
            </a>
          </div>
          <div class="modern-plans-grid" id="airteltigoPlans">
            <!-- AirtelTigo plans will be loaded here -->
          </div>
        </div>
      </div>

      <!-- Error message -->
      <div id="plansError" class="error-container" style="display: none;">
        <i class="fas fa-exclamation-triangle"></i>
        <h3>Oops! Something went wrong</h3>
        <p>Failed to load data plans. Please refresh the page to try again.</p>
        <button onclick="location.reload()" class="retry-btn">
          <i class="fas fa-redo"></i>
          Try Again
        </button>
      </div>
    </div>
  </section>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <!-- Main Footer Content -->
      <div class="footer-content">
        <!-- Company Info -->
        <div class="footer-section">
          <div class="footer-brand">
            <div class="brand-icon">DW</div>
            <div class="brand-text">DataWaves</div>
          </div>
          <p class="footer-description">
            Ghana's leading mobile data provider offering fast, reliable, and affordable data bundles for MTN, Telecel, and AirtelTigo networks.
          </p>
          <div class="footer-stats">
            <div class="footer-stat">
              <i class="fas fa-clock"></i>
              <span>20 Min Delivery</span>
            </div>
            <div class="footer-stat">
              <i class="fas fa-shield-alt"></i>
              <span>100% Secure</span>
            </div>
            <div class="footer-stat">
              <i class="fas fa-headset"></i>
              <span>24/7 Support</span>
            </div>
          </div>
        </div>

        <!-- Networks -->
        <div class="footer-section">
          <h3>Supported Networks</h3>
          <div class="footer-networks">
            <div class="footer-network">
              <img src="images/mtn.png" alt="MTN Ghana">
              <div class="network-info">
                <h4>MTN Ghana</h4>
                <p>Prefixes: 024, 054, 055, 059</p>
                <p>Delivery: 15-20 minutes</p>
                <p class="network-note">All SIM types supported</p>
              </div>
            </div>
            <div class="footer-network">
              <img src="images/telecel.png" alt="Telecel Ghana">
              <div class="network-info">
                <h4>Telecel Ghana</h4>
                <p>Prefixes: 020, 050</p>
                <p>Delivery: 15-20 minutes</p>
                <p class="network-note">All SIM types supported</p>
              </div>
            </div>
            <div class="footer-network">
              <img src="images/airteltigo.png" alt="AirtelTigo Ghana">
              <div class="network-info">
                <h4>AirtelTigo Ghana</h4>
                <p>Prefixes: 026, 027, 056, 057</p>
                <p>Delivery: 15-20 minutes</p>
                <p class="network-note">All SIM types supported</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Services -->
        <div class="footer-section">
          <h3>Our Services</h3>
          <ul class="footer-links">
            <li><a href="buy-plan.html"><i class="fas fa-shopping-cart"></i> Buy Data Plans</a></li>
            <li><a href="dashboard.html"><i class="fas fa-tachometer-alt"></i> Account Dashboard</a></li>
            <li><a href="receipt.html"><i class="fas fa-receipt"></i> Transaction History</a></li>
            <li><a href="account.html"><i class="fas fa-user-cog"></i> Account Settings</a></li>
          </ul>
          
          <h4>Delivery Information</h4>
          <div class="delivery-info">
            <div class="delivery-item">
              <i class="fas fa-clock text-success"></i>
              <span>Average delivery: 15-20 minutes</span>
            </div>
            <div class="delivery-item">
              <i class="fas fa-bolt text-warning"></i>
              <span>Peak hours may take up to 30 minutes</span>
            </div>
            <div class="delivery-item">
              <i class="fas fa-mobile-alt text-info"></i>
              <span>SMS & Email notifications included</span>
            </div>
          </div>
        </div>

        <!-- Support -->
        <div class="footer-section">
          <h3>Support & Contact</h3>
          <div class="contact-info">
            <div class="contact-item">
              <i class="fas fa-phone"></i>
              <span>+233 20 849 4123</span>
            </div>
            <div class="contact-item">
              <i class="fas fa-envelope"></i>
              <span>support@datawaves.com</span>
            </div>
            <div class="contact-item">
              <i class="fas fa-clock"></i>
              <span>24/7 Customer Support</span>
            </div>
          </div>

          <h4>Important Notes</h4>
          <div class="important-notes">
            <div class="note-item">
              <i class="fas fa-info-circle text-info"></i>
              <span>No SIM type restrictions - All SIMs supported</span>
            </div>
            <div class="note-item">
              <i class="fas fa-check-circle text-success"></i>
              <span>Works with Prepaid & Postpaid SIMs</span>
            </div>
            <div class="note-item">
              <i class="fas fa-shield-alt text-primary"></i>
              <span>Secure payments via Paystack</span>
            </div>
            <div class="note-item">
              <i class="fas fa-redo text-warning"></i>
              <span>Failed deliveries automatically refunded</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Network Details Section -->
      <div class="network-details-section">
        <h3>Network Compatibility & Delivery Details</h3>
        <div class="network-details-grid">
          <!-- MTN Details -->
          <div class="network-detail-card mtn-card">
            <div class="network-header">
              <img src="images/mtn.png" alt="MTN Ghana">
              <h4>MTN Ghana</h4>
            </div>
            <div class="network-details">
              <div class="detail-group">
                <h5><i class="fas fa-mobile-alt"></i> Supported Numbers</h5>
                <p>024XXXXXXX, 054XXXXXXX, 055XXXXXXX, 059XXXXXXX</p>
              </div>
              <div class="detail-group">
                <h5><i class="fas fa-sim-card"></i> SIM Compatibility</h5>
                <p>‚úÖ All MTN SIM types supported</p>
                <p>‚úÖ Prepaid & Postpaid SIMs</p>
                <p>‚úÖ No restrictions on SIM age or type</p>
              </div>
              <div class="detail-group">
                <h5><i class="fas fa-clock"></i> Delivery Time</h5>
                <p>üöÄ Average: 15-20 minutes</p>
                <p>‚è∞ Peak hours: Up to 30 minutes</p>
                <p>üì± SMS notification upon delivery</p>
              </div>
            </div>
          </div>

          <!-- Telecel Details -->
          <div class="network-detail-card telecel-card">
            <div class="network-header">
              <img src="images/telecel.png" alt="Telecel Ghana">
              <h4>Telecel Ghana</h4>
            </div>
            <div class="network-details">
              <div class="detail-group">
                <h5><i class="fas fa-mobile-alt"></i> Supported Numbers</h5>
                <p>020XXXXXXX, 050XXXXXXX</p>
              </div>
              <div class="detail-group">
                <h5><i class="fas fa-sim-card"></i> SIM Compatibility</h5>
                <p>‚úÖ All Telecel SIM types supported</p>
                <p>‚úÖ Prepaid & Postpaid SIMs</p>
                <p>‚úÖ No restrictions on SIM age or type</p>
              </div>
              <div class="detail-group">
                <h5><i class="fas fa-clock"></i> Delivery Time</h5>
                <p>üöÄ Average: 15-20 minutes</p>
                <p>‚è∞ Peak hours: Up to 30 minutes</p>
                <p>üì± SMS notification upon delivery</p>
              </div>
            </div>
          </div>

          <!-- AirtelTigo Details -->
          <div class="network-detail-card airteltigo-card">
            <div class="network-header">
              <img src="images/airteltigo.png" alt="AirtelTigo Ghana">
              <h4>AirtelTigo Ghana</h4>
            </div>
            <div class="network-details">
              <div class="detail-group">
                <h5><i class="fas fa-mobile-alt"></i> Supported Numbers</h5>
                <p>026XXXXXXX, 027XXXXXXX, 056XXXXXXX, 057XXXXXXX</p>
              </div>
              <div class="detail-group">
                <h5><i class="fas fa-sim-card"></i> SIM Compatibility</h5>
                <p>‚úÖ All AirtelTigo SIM types supported</p>
                <p>‚úÖ Airtel, Tigo & merged SIMs</p>
                <p>‚úÖ No restrictions on SIM age or type</p>
              </div>
              <div class="detail-group">
                <h5><i class="fas fa-clock"></i> Delivery Time</h5>
                <p>üöÄ Average: 15-20 minutes</p>
                <p>‚è∞ Peak hours: Up to 30 minutes</p>
                <p>üì± SMS notification upon delivery</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Footer Bottom -->
      <div class="footer-bottom">
        <div class="footer-bottom-content">
          <div class="footer-left">
            <p>&copy; 2026 DataWaves. All rights reserved.</p>
            <p>Licensed mobile data provider in Ghana</p>
          </div>
          <div class="footer-right">
            <div class="footer-links-inline">
              <a href="#privacy">Privacy Policy</a>
              <a href="#terms">Terms of Service</a>
              <a href="#refund">Refund Policy</a>
              <a href="#contact">Contact Us</a>
            </div>
            <div class="payment-methods">
              <span>Secured by:</span>
              <img src="https://paystack.com/assets/img/logo/paystack-logo-blue.svg" alt="Paystack" class="payment-logo">
            </div>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <script src="script.js"></script>
  <script>
    // Check authentication status
    function checkAuthStatus() {
      fetch('/api/user')
        .then(res => res.json())
        .then(user => {
          if (!user.error) {
            // Show user info in navbar
            const userInfo = document.getElementById('user-info');
            const authLinksDefault = document.getElementById('auth-links-default');
            
            if (userInfo) {
              userInfo.style.display = 'flex';
            }
            if (authLinksDefault) {
              authLinksDefault.style.display = 'none';
            }
            if (document.getElementById('user-name')) {
              document.getElementById('user-name').textContent = user.full_name || 'Dashboard';
            }
            if (document.getElementById('user-avatar')) {
              const avatar = document.getElementById('user-avatar');
              avatar.textContent = (user.full_name || 'User').charAt(0).toUpperCase();
            }
            
            // Update hero section for logged-in users
            const heroAuthLinks = document.getElementById('hero-auth-links');
            if (heroAuthLinks) {
              heroAuthLinks.innerHTML = `
                <a href="dashboard.html" class="hero-btn primary">
                  <i class="fas fa-tachometer-alt"></i>
                  Go to Dashboard
                </a>
                <a href="buy-plan.html" class="hero-btn secondary">
                  <i class="fas fa-shopping-cart"></i>
                  Buy Data Now
                </a>
              `;
            }
          } else {
            // User not logged in, ensure auth links are visible
            const userInfo = document.getElementById('user-info');
            const authLinksDefault = document.getElementById('auth-links-default');
            
            if (userInfo) {
              userInfo.style.display = 'none';
            }
            if (authLinksDefault) {
              authLinksDefault.style.display = 'flex';
            }
          }
        })
        .catch(err => {
          console.error('Error checking auth status:', err);
          // On error, show auth links
          const userInfo = document.getElementById('user-info');
          const authLinksDefault = document.getElementById('auth-links-default');
          
          if (userInfo) {
            userInfo.style.display = 'none';
          }
          if (authLinksDefault) {
            authLinksDefault.style.display = 'flex';
          }
        });
    }

    // Logout function
    function logout() {
      fetch('/api/logout', { method: 'POST' })
        .then(res => res.json())
        .then(response => {
          if (response.success) {
            window.location.href = "index.html";
          }
        })
        .catch(err => {
          console.error('Logout error:', err);
          window.location.href = "index.html";
        });
    }

    // Mobile menu toggle
    function toggleMobileMenu() {
      const navbarNav = document.querySelector('.navbar-nav');
      const authButtons = document.querySelector('#auth-links-default');
      const userInfo = document.querySelector('#user-info');
      
      navbarNav.classList.toggle('show');
      
      // Toggle auth buttons if user is not logged in
      if (authButtons && authButtons.style.display !== 'none') {
        authButtons.classList.toggle('show');
      }
      
      // Handle user menu for mobile
      if (userInfo && userInfo.style.display !== 'none') {
        userInfo.classList.toggle('show');
      }
    }

    // Load plans from database
    document.addEventListener('DOMContentLoaded', function() {
      checkAuthStatus();
      loadAllPlans();
    });

    async function loadAllPlans() {
      try {
        const response = await fetch('/api/plans');
        if (!response.ok) {
          throw new Error('Failed to fetch plans');
        }
        
        const allPlans = await response.json();
        
        // Group plans by provider
        const plansByProvider = {
          mtn: allPlans.filter(plan => plan.provider === 'mtn'),
          telecel: allPlans.filter(plan => plan.provider === 'telecel'),
          airteltigo: allPlans.filter(plan => plan.provider === 'airteltigo')
        };
        
        // Display plans for each provider
        displayProviderPlans('mtn', plansByProvider.mtn);
        displayProviderPlans('telecel', plansByProvider.telecel);
        displayProviderPlans('airteltigo', plansByProvider.airteltigo);
        
        // Hide loading and show plans
        document.getElementById('plansLoading').style.display = 'none';
        document.getElementById('plansContainer').style.display = 'block';
        
      } catch (error) {
        console.error('Error loading plans:', error);
        document.getElementById('plansLoading').style.display = 'none';
        document.getElementById('plansError').style.display = 'block';
      }
    }

    function displayProviderPlans(provider, plans) {
      const plansContainer = document.getElementById(`${provider}Plans`);
      const sectionContainer = document.getElementById(`${provider}Section`);
      
      if (plans && plans.length > 0) {
        plansContainer.innerHTML = '';
        
        plans.forEach(plan => {
          const planElement = document.createElement('div');
          planElement.className = 'modern-plan-card';
          planElement.innerHTML = `
            <div class="plan-header">
              <div class="plan-size">${plan.size}<span>GB</span></div>
              <div class="plan-price">GHC ${parseFloat(plan.customer_price || plan.price).toFixed(2)}</div>
            </div>
            <div class="plan-details">
              <div class="plan-features">
                <div class="feature"><i class="fas fa-check"></i> Instant activation</div>
                <div class="feature"><i class="fas fa-check"></i> No expiry rollover</div>
              </div>
            </div>
          `;
          plansContainer.appendChild(planElement);
        });
        
        sectionContainer.style.display = 'block';
      }
    }

    // Add CSS for loading spinner
    const style = document.createElement('style');
    style.textContent = `
      @keyframes spin {
        to { transform: rotate(360deg); }
      }
    `;
    document.head.appendChild(style);
  </script>
</body>
</html>