<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Create a DataWaves account to purchase mobile data bundles for MTN, Telecel, and AirtelTigo in Ghana. Fast, reliable, and secure data purchases.">
  <meta name="keywords" content="register, sign up, mobile data, Ghana, account, MTN, Telecel, AirtelTigo, data bundles">
  <meta name="author" content="DataWaves">
  <meta name="robots" content="noindex, follow">
  <title>Register - DataWaves | Create Mobile Data Account</title>
  <link rel="stylesheet" href="style.css" />
  <!-- Font Awesome for Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body class="auth-body">
  <!-- Modern Navbar -->
  <nav class="navbar">
    <div class="navbar-container">
      <a href="index.html" class="navbar-brand">
        <div class="brand-icon">DW</div>
        <div class="brand-text">DataWaves</div>
      </a>
      
      <ul class="navbar-nav">
        <li class="nav-item">
          <a href="mtn.html" class="nav-link">
            <img src="images/mtn.png" alt="MTN">
            <span class="nav-tooltip">MTN Ghana</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="telecel.html" class="nav-link">
            <img src="images/telecel.png" alt="Telecel">
            <span class="nav-tooltip">Telecel Ghana</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="at.html" class="nav-link">
            <img src="images/airteltigo.png" alt="AirtelTigo">
            <span class="nav-tooltip">AirtelTigo Ghana</span>
          </a>
        </li>
      </ul>
      
      <div class="navbar-actions">
        <div class="auth-buttons">
          <a href="login.html" class="auth-btn login">
            <i class="fas fa-sign-in-alt"></i>
            Login
          </a>
          <a href="register.html" class="auth-btn register">
            <i class="fas fa-user-plus"></i>
            Register
          </a>
        </div>
        
        <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
          <i class="fas fa-bars"></i>
        </button>
      </div>
    </div>
  </nav>

  <!-- Registration Section -->
  <div class="auth-wrapper">
    <div class="auth-container">
      <div class="auth-card">
        <div class="auth-header">
          <div class="auth-icon">
            <i class="fas fa-user-plus"></i>
          </div>
          <h1>Join DataWaves</h1>
          <p>Create your account to get started</p>
        </div>
        
        <form id="registerForm" class="auth-form">
          <div class="form-group">
            <div class="input-wrapper">
              <i class="fas fa-user input-icon"></i>
              <input type="text" id="full_name" name="full_name" placeholder="Enter your full name" required />
              <label for="full_name">Full Name</label>
            </div>
          </div>
          
          <div class="form-group">
            <div class="input-wrapper">
              <i class="fas fa-envelope input-icon"></i>
              <input type="email" id="email" name="email" placeholder="Enter your email" required />
              <label for="email">Email Address</label>
            </div>
          </div>
          
          <div class="form-group">
            <div class="input-wrapper">
              <i class="fas fa-phone input-icon"></i>
              <input type="tel" id="phone" name="phone" placeholder="e.g., 024XXXXXXX or +23324XXXXXXX" />
              <label for="phone">Phone Number</label>
            </div>
          </div>
          
          <div class="form-group">
            <div class="input-wrapper">
              <i class="fas fa-lock input-icon"></i>
              <input type="password" id="password" name="password" placeholder="Create a password" required />
              <label for="password">Password</label>
              <button type="button" class="password-toggle" onclick="togglePassword('password')">
                <i class="fas fa-eye"></i>
              </button>
            </div>
            <div class="password-requirements">
              <small>Password must be at least 8 characters with uppercase, lowercase, and number</small>
            </div>
          </div>
          
          <div class="form-group">
            <div class="input-wrapper">
              <i class="fas fa-lock input-icon"></i>
              <input type="password" id="confirm_password" name="confirm_password" placeholder="Confirm your password" required />
              <label for="confirm_password">Confirm Password</label>
              <button type="button" class="password-toggle" onclick="togglePassword('confirm_password')">
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>
          
          <button type="submit" class="auth-btn">
            <span>Create Account</span>
            <i class="fas fa-arrow-right"></i>
          </button>
        </form>
        
        <div class="auth-footer">
          <p>Already have an account? <a href="login.html" class="auth-link">Sign in here</a></p>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Password toggle functionality
    function togglePassword(inputId) {
      const input = document.getElementById(inputId);
      const toggle = input.parentElement.querySelector('.password-toggle i');
      
      if (input.type === 'password') {
        input.type = 'text';
        toggle.classList.remove('fa-eye');
        toggle.classList.add('fa-eye-slash');
      } else {
        input.type = 'password';
        toggle.classList.remove('fa-eye-slash');
        toggle.classList.add('fa-eye');
      }
    }

    // Mobile menu toggle
    function toggleMobileMenu() {
      const navbarNav = document.querySelector('.navbar-nav');
      const authButtons = document.querySelector('.auth-buttons');
      navbarNav.classList.toggle('show');
      if (authButtons) {
        authButtons.classList.toggle('show');
      }
    }

    document.addEventListener('DOMContentLoaded', function () {
      const registerForm = document.getElementById('registerForm');

      // Add floating label effect
      const inputs = document.querySelectorAll('.input-wrapper input');
      inputs.forEach(input => {
        input.addEventListener('focus', function() {
          this.parentElement.classList.add('focused');
        });
        
        input.addEventListener('blur', function() {
          if (this.value === '') {
            this.parentElement.classList.remove('focused');
          }
        });
        
        // Check if input has value on load
        if (input.value !== '') {
          input.parentElement.classList.add('focused');
        }
      });

      // Real-time password validation
      const passwordInput = document.getElementById('password');
      const confirmPasswordInput = document.getElementById('confirm_password');
      
      function validatePassword() {
        const password = passwordInput.value;
        const confirmPassword = confirmPasswordInput.value;
        
        // Password strength validation
        const hasUpperCase = /[A-Z]/.test(password);
        const hasLowerCase = /[a-z]/.test(password);
        const hasNumbers = /\d/.test(password);
        const hasMinLength = password.length >= 8;
        
        const isValidPassword = hasUpperCase && hasLowerCase && hasNumbers && hasMinLength;
        
        if (password && !isValidPassword) {
          passwordInput.parentElement.classList.add('error');
        } else {
          passwordInput.parentElement.classList.remove('error');
        }
        
        // Confirm password validation
        if (confirmPassword && password !== confirmPassword) {
          confirmPasswordInput.parentElement.classList.add('error');
        } else {
          confirmPasswordInput.parentElement.classList.remove('error');
        }
      }
      
      passwordInput.addEventListener('input', validatePassword);
      confirmPasswordInput.addEventListener('input', validatePassword);

      if (registerForm) {
        registerForm.addEventListener('submit', function (e) {
          e.preventDefault();
          const formData = new FormData(registerForm);
          const data = Object.fromEntries(formData);

          // Validate passwords match
          if (data.password !== data.confirm_password) {
            alert("Passwords do not match!");
            return;
          }

          // Add loading state
          const submitBtn = registerForm.querySelector('.auth-btn');
          const originalText = submitBtn.innerHTML;
          submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Creating Account...';
          submitBtn.disabled = true;

          // Send to backend
          fetch('/api/register', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
          })
          .then(res => res.json())
          .then(response => {
            if (response.success) {
              alert("Registration successful! Please login.");
              window.location.href = "login.html";
            } else {
              alert(response.error || "Registration failed!");
              submitBtn.innerHTML = originalText;
              submitBtn.disabled = false;
            }
          })
          .catch(err => {
            console.error('Error:', err);
            alert("Registration failed! Please try again.");
            submitBtn.innerHTML = originalText;
            submitBtn.disabled = false;
          });
        });
      }
    });
  </script>
</body>
</html>