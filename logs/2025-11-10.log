{"timestamp":"2025-11-10T07:48:48.145Z","level":"info","message":"Initializing payment","metadata":{"email":"collinsleatrage@gmail.com","amount":"5.50","metadata":{"user_id":3,"plan_id":1,"phone_number":"0596123350","network":"mtn"}}}
{"timestamp":"2025-11-10T07:48:48.748Z","level":"error","message":"Payment initialization failed","metadata":{"error":"Request failed with status code 401"}}
{"timestamp":"2025-11-10T07:52:11.191Z","level":"info","message":"Initializing payment","metadata":{"email":"collinsleatrage@gmail.com","amount":"5.50","metadata":{"user_id":3,"plan_id":1,"phone_number":"0596123350","network":"mtn"}}}
{"timestamp":"2025-11-10T07:52:11.672Z","level":"error","message":"Payment initialization failed","metadata":{"error":"Request failed with status code 401"}}
{"timestamp":"2025-11-10T08:40:15.254Z","level":"info","message":"Initializing payment","metadata":{"email":"collinsleatrage@gmail.com","amount":"15.00","metadata":{"user_id":3,"plan_id":3,"phone_number":"0596123350","network":"mtn"}}}
{"timestamp":"2025-11-10T08:40:15.780Z","level":"error","message":"Payment initialization failed","metadata":{"error":"Request failed with status code 401"}}
{"timestamp":"2025-11-10T08:45:07.322Z","level":"info","message":"Initializing payment","metadata":{"email":"collinsleatrage@gmail.com","amount":"8.50","metadata":{"user_id":3,"plan_id":2,"phone_number":"0596123350","network":"mtn"}}}
{"timestamp":"2025-11-10T08:45:07.696Z","level":"error","message":"Payment initialization failed","metadata":{"error":"Request failed with status code 401"}}
{"timestamp":"2025-11-10T09:46:31.153Z","level":"info","message":"Initializing payment","metadata":{"email":"collinsleatrage@gmail.com","amount":"5.50","metadata":{"user_id":3,"plan_id":1,"phone_number":"0596123350","network":"mtn"}}}
{"timestamp":"2025-11-10T09:46:31.650Z","level":"error","message":"Payment initialization failed","metadata":{"error":"Request failed with status code 401"}}
{"timestamp":"2025-11-10T12:42:30.239Z","level":"warn","message":"Twilio credentials not configured or invalid, SMS service will be disabled","metadata":{}}
{"timestamp":"2025-11-10T12:44:01.262Z","level":"warn","message":"Twilio credentials not configured or invalid, SMS service will be disabled","metadata":{}}
{"timestamp":"2025-11-10T12:48:13.944Z","level":"info","message":"Payment initialization started","metadata":{"userId":4,"planId":"1","phoneNumber":"0596123350","paymentMethod":"momo","confirmationMethod":"sms"}}
{"timestamp":"2025-11-10T12:48:14.334Z","level":"error","message":"Payment initialization error","metadata":{"error":"Unknown column 'confirmation_method' in 'field list'","stack":"Error: Unknown column 'confirmation_method' in 'field list'\n    at PromisePool.execute (C:\\xampp\\htdocs\\DATAWAY\\node_modules\\mysql2\\lib\\promise\\pool.js:54:22)\n    at Transaction.create (C:\\xampp\\htdocs\\DATAWAY\\models\\Transaction.js:12:33)\n    at C:\\xampp\\htdocs\\DATAWAY\\routes\\payment.js:65:51\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","userId":4}}
{"timestamp":"2025-11-10T12:50:49.557Z","level":"warn","message":"Twilio credentials not configured or invalid, SMS service will be disabled","metadata":{}}
{"timestamp":"2025-11-10T12:51:21.869Z","level":"warn","message":"Twilio credentials not configured or invalid, SMS service will be disabled","metadata":{}}
{"timestamp":"2025-11-10T13:00:11.174Z","level":"warn","message":"Twilio credentials not configured or invalid, SMS service will be disabled","metadata":{}}
{"timestamp":"2025-11-10T13:03:36.833Z","level":"warn","message":"Twilio credentials not configured or invalid, SMS service will be disabled","metadata":{}}
{"timestamp":"2025-11-10T13:06:34.935Z","level":"info","message":"Payment initialization started","metadata":{"userId":4,"planId":"1","phoneNumber":"0596123350","paymentMethod":"momo","confirmationMethod":"sms"}}
{"timestamp":"2025-11-10T13:06:35.304Z","level":"transaction","message":"Transaction created","metadata":{"transactionId":"8119384d-e6b3-4481-a2f4-a97eed7ef569","action":"created","userId":4,"planId":1,"network":"mtn","amount":5.775}}
{"timestamp":"2025-11-10T13:06:36.368Z","level":"error","message":"MoMo access token request failed","metadata":{"error":"Request failed with status code 401"}}
{"timestamp":"2025-11-10T13:06:36.371Z","level":"error","message":"MoMo request to pay failed","metadata":{"error":"Failed to get MoMo access token: Access denied due to invalid subscription key. Make sure to provide a valid key for an active subscription."}}
{"timestamp":"2025-11-10T13:06:36.375Z","level":"error","message":"Payment initialization error","metadata":{"error":"MoMo payment request failed: Failed to get MoMo access token: Access denied due to invalid subscription key. Make sure to provide a valid key for an active subscription.","stack":"Error: MoMo payment request failed: Failed to get MoMo access token: Access denied due to invalid subscription key. Make sure to provide a valid key for an active subscription.\n    at MoMoService.requestToPay (C:\\xampp\\htdocs\\DATAWAY\\services\\momoService.js:50:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\xampp\\htdocs\\DATAWAY\\routes\\payment.js:77:28","userId":4}}
{"timestamp":"2025-11-10T13:11:30.543Z","level":"info","message":"Payment initialization started","metadata":{"userId":4,"planId":"1","phoneNumber":"0596123350","paymentMethod":"momo","confirmationMethod":"sms"}}
{"timestamp":"2025-11-10T13:11:30.553Z","level":"transaction","message":"Transaction created","metadata":{"transactionId":"0ce68fdd-97f3-43e5-8a51-06a2965772b9","action":"created","userId":4,"planId":1,"network":"mtn","amount":5.775}}
{"timestamp":"2025-11-10T13:11:31.358Z","level":"error","message":"MoMo access token request failed","metadata":{"error":"Request failed with status code 401"}}
{"timestamp":"2025-11-10T13:11:31.362Z","level":"error","message":"MoMo request to pay failed","metadata":{"error":"Failed to get MoMo access token: Access denied due to invalid subscription key. Make sure to provide a valid key for an active subscription."}}
{"timestamp":"2025-11-10T13:11:31.365Z","level":"error","message":"Payment initialization error","metadata":{"error":"MoMo payment request failed: Failed to get MoMo access token: Access denied due to invalid subscription key. Make sure to provide a valid key for an active subscription.","stack":"Error: MoMo payment request failed: Failed to get MoMo access token: Access denied due to invalid subscription key. Make sure to provide a valid key for an active subscription.\n    at MoMoService.requestToPay (C:\\xampp\\htdocs\\DATAWAY\\services\\momoService.js:50:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\xampp\\htdocs\\DATAWAY\\routes\\payment.js:77:28","userId":4}}
{"timestamp":"2025-11-10T13:41:21.033Z","level":"info","message":"Payment initialization started","metadata":{"userId":4,"planId":"1","phoneNumber":"0596123350","paymentMethod":"momo","confirmationMethod":"sms"}}
{"timestamp":"2025-11-10T13:41:21.059Z","level":"transaction","message":"Transaction created","metadata":{"transactionId":"727a7d67-5505-4905-aec7-837619e4706d","action":"created","userId":4,"planId":1,"network":"mtn","amount":5.775}}
{"timestamp":"2025-11-10T13:41:27.513Z","level":"error","message":"MoMo access token request failed","metadata":{"error":"Request failed with status code 401"}}
{"timestamp":"2025-11-10T13:41:27.516Z","level":"error","message":"MoMo request to pay failed","metadata":{"error":"Failed to get MoMo access token: Access denied due to invalid subscription key. Make sure to provide a valid key for an active subscription."}}
{"timestamp":"2025-11-10T13:41:27.520Z","level":"error","message":"Payment initialization error","metadata":{"error":"MoMo payment request failed: Failed to get MoMo access token: Access denied due to invalid subscription key. Make sure to provide a valid key for an active subscription.","stack":"Error: MoMo payment request failed: Failed to get MoMo access token: Access denied due to invalid subscription key. Make sure to provide a valid key for an active subscription.\n    at MoMoService.requestToPay (C:\\xampp\\htdocs\\DATAWAY\\services\\momoService.js:50:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\xampp\\htdocs\\DATAWAY\\routes\\payment.js:77:28","userId":4}}
{"timestamp":"2025-11-10T13:41:48.209Z","level":"info","message":"Payment initialization started","metadata":{"userId":4,"planId":"1","phoneNumber":"0596123350","paymentMethod":"momo","confirmationMethod":"sms"}}
{"timestamp":"2025-11-10T13:41:48.219Z","level":"transaction","message":"Transaction created","metadata":{"transactionId":"8b48dcc2-a858-4707-9ee2-8cd8a8cd404d","action":"created","userId":4,"planId":1,"network":"mtn","amount":5.775}}
{"timestamp":"2025-11-10T13:41:49.155Z","level":"error","message":"MoMo access token request failed","metadata":{"error":"Request failed with status code 401"}}
{"timestamp":"2025-11-10T13:41:49.156Z","level":"error","message":"MoMo request to pay failed","metadata":{"error":"Failed to get MoMo access token: Access denied due to invalid subscription key. Make sure to provide a valid key for an active subscription."}}
{"timestamp":"2025-11-10T13:41:49.158Z","level":"error","message":"Payment initialization error","metadata":{"error":"MoMo payment request failed: Failed to get MoMo access token: Access denied due to invalid subscription key. Make sure to provide a valid key for an active subscription.","stack":"Error: MoMo payment request failed: Failed to get MoMo access token: Access denied due to invalid subscription key. Make sure to provide a valid key for an active subscription.\n    at MoMoService.requestToPay (C:\\xampp\\htdocs\\DATAWAY\\services\\momoService.js:50:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\xampp\\htdocs\\DATAWAY\\routes\\payment.js:77:28","userId":4}}
{"timestamp":"2025-11-10T15:21:51.220Z","level":"warn","message":"Twilio credentials not configured or invalid, SMS service will be disabled","metadata":{}}
{"timestamp":"2025-11-10T15:23:39.773Z","level":"info","message":"SMS service not configured, logging message instead","metadata":{"to":"0596123350","message":"\nDataWay Payment Confirmation\n\nDear jake,\nYour payment of GHC 5.78 for 1GB MTN data has been processed successfully.\n\nTransaction ID: 8b48dcc2-a858-4707-9ee2-8cd8a8cd404d\nDate: 10/11/2025, 13:41:48\n\nYour data bundle will be delivered shortly.\n\nThank you for choosing DataWay!\n    "}}
{"timestamp":"2025-11-10T15:23:39.775Z","level":"info","message":"Receipt resent via SMS","metadata":{"reference":"8b48dcc2-a858-4707-9ee2-8cd8a8cd404d","phone":"0596123350"}}
{"timestamp":"2025-11-10T15:24:19.834Z","level":"info","message":"Payment initialization started","metadata":{"userId":4,"planId":"1","phoneNumber":"0596123350","paymentMethod":"momo","confirmationMethod":"sms"}}
{"timestamp":"2025-11-10T15:24:19.924Z","level":"transaction","message":"Transaction created","metadata":{"transactionId":"cb35075c-ff4d-4318-bf02-29d339993fb8","action":"created","userId":4,"planId":1,"network":"mtn","amount":5.775}}
{"timestamp":"2025-11-10T15:24:20.767Z","level":"error","message":"MoMo access token request failed","metadata":{"error":"Request failed with status code 401"}}
{"timestamp":"2025-11-10T15:24:20.770Z","level":"error","message":"MoMo request to pay failed","metadata":{"error":"Failed to get MoMo access token: Access denied due to invalid subscription key. Make sure to provide a valid key for an active subscription."}}
{"timestamp":"2025-11-10T15:24:20.772Z","level":"error","message":"Payment initialization error","metadata":{"error":"MoMo payment request failed: Failed to get MoMo access token: Access denied due to invalid subscription key. Make sure to provide a valid key for an active subscription.","stack":"Error: MoMo payment request failed: Failed to get MoMo access token: Access denied due to invalid subscription key. Make sure to provide a valid key for an active subscription.\n    at MoMoService.requestToPay (C:\\xampp\\htdocs\\DATAWAY\\services\\momoService.js:50:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\xampp\\htdocs\\DATAWAY\\routes\\payment.js:77:28","userId":4}}
